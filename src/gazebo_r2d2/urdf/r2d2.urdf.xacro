<?xml version="1.0"?>
<robot name="r2d2" xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- macro template -->
  <xacro:include filename="$(find gazebo_r2d2)/urdf/utils.urdf.xacro" />

  <!-- link -->
  <xacro:link_cylinder_no_ineatia link_name="axis" radius="0.01" length="0.5">
    <origin xyz="0 0 0" rpy="1.57 0 0" />
  </xacro:link_cylinder_no_ineatia>

  <xacro:link_box link_name="leg1" width="0.20" height="0.10" depth="0.8">
    <origin xyz="0 0 -0.3" />
  </xacro:link_box>

  <xacro:link_box link_name="leg2" width="0.20" height="0.10" depth="0.8">
    <origin xyz="0 0 -0.3" />
  </xacro:link_box>

  <xacro:link_cylinder link_name="body" radius="0.20" length="0.6">
      <origin xyz="0 0 -0.2" />
  </xacro:link_cylinder>

  <xacro:link_sphere link_name="head" radius="0.40">
      <origin/>
  </xacro:link_sphere>

  <xacro:link_cylinder link_name="rod" radius="0.02" length="0.2">
      <origin xyz="0 0 -0.1" />
  </xacro:link_cylinder>

  <xacro:link_box link_name="box" width="0.05" height="0.05" depth="0.05">
      <origin/>
  </xacro:link_box>
  
  <!-- joint -->
  <joint name="leg1connect" type="fixed">
    <origin xyz="0 .30 0" />
    <parent link="axis"/>
    <child link="leg1"/>
  </joint>

  <joint name="leg2connect" type="fixed">
    <origin xyz="0 -.30 0" />
    <parent link="axis"/>
    <child link="leg2"/>
  </joint>

  <joint name="tilt" type="revolute">
    <parent link="axis"/>
    <child link="body"/>
    <origin xyz="0 0 0" rpy="0 0 0" />
    <axis xyz="0 1 0" />
    <limit upper="0" lower="-.5" effort="10" velocity="10" />
  </joint>

  <joint name="swivel" type="continuous">
    <origin xyz="0 0 0.1" />
    <axis xyz="0 0 1" />
    <parent link="body"/>
    <child link="head"/>
  </joint>

  <joint name="periscope" type="prismatic">
    <origin xyz=".12 0 .15" />
    <axis xyz="0 0 1" />
    <limit upper="0" lower="-.5" effort="10" velocity="10" />
    <parent link="head"/>
    <child link="rod"/>
  </joint>

  <joint name="boxconnect" type="fixed">
    <origin xyz="0 0 0" />
    <parent link="rod"/>
    <child link="box"/>
  </joint>

</robot>
